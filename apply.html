<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application Form</title>
    <link rel="icon" href="favicon2.png">
    <link rel="stylesheet" href="apply.css">
</head>

<body>
    <div class="container">
        <div class="box">
            <h1 align="center"> Job Application</h1><br>
            <form id="jobApplicationForm">
                <div class="form_container">
                    <div class="form_control">
                        <label for="first_name">First Name</label>
                        <input id="first_name" name="first_name" placeholder="Enter First Name">

                    </div>
                    <div class="form_control">
                        <label for="last_name">Last Name</label>
                        <input id="last_name" name="last_name" placeholder="Enter Last Name">

                    </div>
                    <div class="form_control">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" placeholder="Enter Email">

                    </div>
                    <div class="form_control">
                        <label for="job_role">Job Role</label>
                        <select id="job_role" name="job_role">
                            <option value="">Select Job Role</option>
                            <option value="frontend">Frontend Developer</option>
                            <option value="full_stack">Full Stack Developer</option>
                            <option value="backend">Backend Developer</option>
                        </select>

                    </div>
                    <div class="textarea_control">
                        <label for="address">Address</label>
                        <textarea name="address" id="address" cols="50" rows="4" placeholder="Enter address"></textarea>

                    </div>
                    <div class="form_control">
                        <label for="city">City</label>
                        <input id="city" name="city" placeholder="Enter City Name">

                    </div>
                    <div class="form_control">
                        <label for="pincode">Pincode</label>
                        <input type="number" id="pincode" name="pincode" placeholder="Enter Pincode">

                    </div>
                    <div class="form_control">
                        <label for="date">Date</label>
                        <input value="2022-12-03" type="date" id="date" name="date">

                    </div>
                    <div class="form_control">
                        <label for="upload">Upload Your CV</label>
                        <input type="file" id="upload" name="upload">

                    </div>
                </div>
                <div class="button_container">
                    <button type="button" onclick="saveFormData()">Apply Now</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function saveFormData() {
            // Get form values
            var firstName = document.getElementById("first_name").value;
            var lastName = document.getElementById("last_name").value;
            var email = document.getElementById("email").value;
            var jobRole = document.getElementById("job_role").value;
            var address = document.getElementById("address").value;
            var city = document.getElementById("city").value;
            var pincode = document.getElementById("pincode").value;
            var date = document.getElementById("date").value;

            // Retrieve existing data from local storage
            var existingData = localStorage.getItem('formData');

            // If there's existing data, parse it; otherwise, initialize an empty array
            var formDataArray = existingData ? JSON.parse(existingData) : [];

            // Ensure formDataArray is an array
            if (!Array.isArray(formDataArray)) {
                formDataArray = [];
            }

            // Create JSON object for current form data
            var formData = {
                "first_name": firstName,
                "last_name": lastName,
                "email": email,
                "job_role": jobRole,
                "address": address,
                "city": city,
                "pincode": pincode,
                "date": date
            };

            // Push current form data into the array
            formDataArray.push(formData);
            console.log(formDataArray[1]);
            // Save the updated array in local storage
            localStorage.setItem('formData', JSON.stringify(formDataArray));
            
            // Optionally, provide feedback to the user
            alert('Form data saved successfully');
            console.log(formDataArray);

        }
        
    </script>
</body>

</html>
